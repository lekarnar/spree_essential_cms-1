<% content_for :page_title do %>
  <%= t('.listing_pages') %>
<% end %>

<div class="box">
  <h4 style="text-align: center;"><%= Spree.t(:search) %></h4>
  <%= search_form_for [:admin, @search] do |f| %>
    <div class="page-title">
      <%= f.label :title_cont, t('page.title') %><br />
      <%= f.text_field :title_cont, :size => 25, class: 'form-control' %>
    </div>
    <div class="page-path">
      <%= f.label :path_cont, t('page.path') %><br />
      <%= f.text_field :path_cont, :size => 25, class: 'form-control' %>
    </div>
    <div class="search"><%= button Spree.t("search") %></div>
  <% end %>
</div>

<table class="table table-bordered index sortable" data-sortable-link="<%= update_positions_admin_pages_url -%>">
  <thead>
  <tr>
    <th><%= sort_link @search, :title, t("page.title") %></th>
    <th><%= sort_link @search, :path, t("page.path") %></th>
    <th><%= sort_link @search, :accessible, t("page.accessible") %></th>
    <th><%= sort_link @search, :visible, t("page.visible") %></th>
    <th><%= Spree.t("action") %></th>
  </tr>
  </thead>
  <tbody>
    <%- @collection.each do |page|%>
    <tr id="<%= spree_dom_id page %>">
      <td><span class="handle">&nbsp;</span>&nbsp; <%=link_to page.title, object_url(page) %></td>
      <td><%= page.path %></td>
      <td><%= page.accessible %></td>
      <td><%= page.visible %></td>
      <td>
        <%= link_to_with_icon :accept, t('preview'), page.path, :onclick => 'window.open(this.href);return false;' %> &nbsp;
        <%= link_to_with_icon :pages, t('page.contents'), admin_page_contents_path(page) %> &nbsp;
        <%= link_to_edit page.path, :no_text => true %> &nbsp;
        <%= link_to_delete page.path, :no_text => true %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @collection %>

<div id="new_page"></div>
<% content_for :page_actions do %>
  <li id="new_product_link">
    <%= button_link_to t('.new_page'), new_object_url, { icon: 'icon-plus', class: 'btn btn-success' } %>
  </li>
<% end %>
